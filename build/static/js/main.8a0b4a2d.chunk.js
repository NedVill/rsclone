(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{63:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(0),c=n.n(r),o=n(8),s=n.n(o),l=(n(63),n(42));function i(){}var u=Object(r.createContext)({token:null,userId:null,login:i,logout:i,isAuthenticated:!1}),d=n(11),j=function(){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"HomePage"})})},b=function(){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"BoardPage"})})},h=n(37),O=n(24),p=n.n(O),x=n(35),g=n(32),f=n(21),v=n(97),m=n(100),k=n(103),y=n(101),S=n(104),w=function(){var e=Object(r.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),o=Object(f.a)(c,2),s=o[0],l=o[1];return{loading:s,request:Object(r.useCallback)(function(){var e=Object(g.a)(p.a.mark((function e(t){var n,r,c,o,s,i,u,d,j,b,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.method,c=void 0===r?"GET":r,o=t.body,s=void 0===o?null:o,i=t.headers,u=void 0===i?{}:i,l(!0),e.prev=2,d=JSON.stringify(s),(j=u)["Content-Type"]="application/json",e.next=8,fetch(n,{method:c,body:d,headers:j});case 8:return b=e.sent,e.next=11,b.json();case 11:if(h=e.sent,b.ok){e.next=14;break}throw new Error(h.message||"Failed to get data.");case 14:return l(!1),e.abrupt("return",h);case 18:throw e.prev=18,e.t0=e.catch(2),l(!1),a(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:n,clearErorr:Object(r.useCallback)((function(){return a(null)}),[])}},C=function(){var e=Object(r.useState)({email:"",password:"",fullName:""}),t=Object(f.a)(e,2),n=t[0],c=t[1],o=w(),s=o.loading,l=o.request,i=o.error,d=o.clearErorr,j=Object(r.useContext)(u);Object(r.useEffect)((function(){console.log(i),d()}),[i,d]);var b=function(){var e=Object(g.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={url:"https://rsclone-back-end.herokuapp.com/api/auth/register",method:"POST",body:Object(x.a)({},n)},e.next=4,l(t);case 4:a=e.sent,console.log(a.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={url:"https://rsclone-back-end.herokuapp.com/api/auth/login",method:"POST",body:Object(x.a)({},n)},e.next=4,l(t);case 4:a=e.sent,r=a.token,c=a.userId,j.login(r,c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d();case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){c(Object(x.a)(Object(x.a)({},n),{},Object(h.a)({},e.target.name,e.target.value)))};return Object(a.jsxs)(v.a,{children:[Object(a.jsx)("h1",{children:"Auth page"}),Object(a.jsx)(m.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(a.jsxs)(m.a,{item:!0,xs:6,children:[Object(a.jsxs)(k.a,{bgcolor:"green accent-4",color:"secondary.contrastText",p:2,children:[Object(a.jsx)(y.a,{label:"Standard",placeholder:"Email",type:"email",name:"email",onChange:C}),Object(a.jsx)(y.a,{label:"Standard",placeholder:"Full name",type:"text",name:"fullName",onChange:C}),Object(a.jsx)(y.a,{label:"Standard",placeholder:"Password",type:"password",name:"password",onChange:C})]}),Object(a.jsxs)(k.a,{children:[Object(a.jsx)(S.a,{variant:"contained",onClick:b,disabled:s,children:"Singup"}),Object(a.jsx)(S.a,{variant:"contained",onClick:O,disabled:s,children:"Login"})]})]})})]})},I=function(e){return e?Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/links",exact:!0,children:Object(a.jsx)(j,{})}),Object(a.jsx)(d.b,{path:"/create",exact:!0,children:Object(a.jsx)(b,{})}),Object(a.jsx)(d.a,{to:"/create"})]}):Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/",exact:!0,children:Object(a.jsx)(C,{})}),Object(a.jsx)(d.a,{to:"/"})]})},E="userData",P=function(){var e=Object(r.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),o=Object(f.a)(c,2),s=o[0],l=o[1],i=Object(r.useState)(null),u=Object(f.a)(i,2),d=u[0],j=u[1],b=Object(r.useCallback)((function(e,t){a(e),j(t),localStorage.setItem(E,JSON.stringify({token:e,userId:t}))}),[]);return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem(E));console.log(e),(null===e||void 0===e?void 0:e.token)&&(null===e||void 0===e?void 0:e.userId)&&b(e.token,e.userId),l(!0)}),[b,l]),{login:b,logout:function(){a(null),j(null),localStorage.removeItem(E)},token:n,userId:d,ready:s}};var T=function(){var e=P(),t=e.token,n=e.login,r=e.logout,c=e.userId,o=e.ready,s=!!t,i=I(s);return o||console.log("loading"),Object(a.jsx)(u.Provider,{value:{token:t,login:n,logout:r,userId:c,isAuthenticated:s},children:Object(a.jsx)(l.a,{children:Object(a.jsx)("div",{className:"container",children:i})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,107)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(T,{})}),document.getElementById("root")),F()}},[[70,1,2]]]);
//# sourceMappingURL=main.8a0b4a2d.chunk.js.map